// протокол обмена данными при запросе справочника договоров, справочника адресов доставки, скидок

1. запрос версий справочников клиента:
>> VERSIONS_<id_клиента>_<открытый_ключ>

формат ответа:
<< V_DISC=<верси€_скидок_на_сервере>
<< V_ADDR=<верси€_справочника_адресов_на_сервере>
<< V_AGR=<верси€_справочника_договоров_на_сервере>
<< END
|
<< ERROR=<код_ошибки> //при ошибке
<< END

2. «апрос справочника скидок:
>> GET_DISC_<id_клиента>_<открытый_ключ>

формат ответа:
<< VERSION=<верси€_скидок_на_сервере>
<< BINFILE
<< <ZIP-пакет, бинарные данные>
<< ENDFILE
<< END
|
<< ERROR=<код_ошибки> //при ошибке
<< END

3. «апрос справочника договоров:
>> GET_AGR_<id_клиента>_<открытый_ключ>

формат ответа:
<< VERSION=<верси€_справочника_договоров_на_сервере>
<< BINFILE
<< <ZIP-пакет, бинарные данные>
<< ENDFILE
<< END
|
<< ERROR=<код_ошибки> //при ошибке
<< END

4. «апрос справочника адресов:
>> GET_ADDR_<id_клиента>_<открытый_ключ>

формат ответа:
<< VERSION=<верси€_справочника_адресов_на_сервере>
<< BINFILE
<< <ZIP-пакет, бинарные данные>
<< ENDFILE
<< END
|
<< ERROR=<код_ошибки> //при ошибке
<< END


__________________________
коды ошибок:
-1 - внутренн€€ ошибка на сервере (клиенту сказать чтоб повторил попытку позже)
-2 - не распознан запрос (не удовлетвор€ет формату)
1 - ошибка авторизации (проверка ключа не прошла)
2 - данные клиента не найдены в Ѕƒ (передан неверный ID-клиента или еще не попал в базу нужный файлик)
